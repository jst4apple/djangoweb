<html>
    <head>
        <link type="text/css" rel="stylesheet" href="http://lib-1254363473.file.myqcloud.com/jsmind/jsmind.css" />
        <script type="text/javascript" src="http://lib-1254363473.file.myqcloud.com/jsmind/jsmind.js"></script>
        <!--
            enable drag-and-drop feature
            <script type="text/javascript" src="js/jsmind.draggable.js"></script>
        -->
    </head>
    <body>
        <div id="jsmind_container"></div>
			{% if user.is_authenticated %}
                <p>你已登录，欢迎你：<a href="#">{{ user.username }}</a></p>
                <button class="btn btn-default"><a href="{% url 'logout' %}?next={{ request.path }}">注销登录</a>
                </button>
                <button class="btn btn-default"><a href="{% url 'password_change' %}?next={{ request.path }}">修改密码</a>
                </button>
				<script type="text/javascript">
					var mind = {
						/* 元数据，定义思维导图的名称、作者、版本等信息 */
						"meta":{
							"name":"{{user.username}}",
							"author":"hizzgdev@163.com",
							"version":"0.2"
						},
						/* 数据格式声明 */
						"format":"node_tree",
						/* 数据内容 */
						"data":{"id":"root","topic":"jsMind","children":[
							{"id":"easy","topic":"Easy","direction":"left","expanded":false,"children":[
								{"id":"easy1","topic":"Easy to show"},
								{"id":"easy2","topic":"Easy to edit"},
								{"id":"easy3","topic":"Easy to store"},
								{"id":"easy4","topic":"Easy to embed"}
							]},
							{"id":"open","topic":"Open Source","direction":"right","expanded":true,"children":[
								{"id":"open1","topic":"on GitHub"},
								{"id":"open2","topic":"BSD License"}
							]},
							{"id":"powerful","topic":"Powerful","direction":"right","children":[
								{"id":"powerful1","topic":"Base on Javascript"},
								{"id":"powerful2","topic":"Base on HTML5"},
								{"id":"powerful3","topic":"Depends on you"}
							]},
							{"id":"other","topic":"test node","direction":"left","children":[
								{"id":"other1","topic":"I'm from local variable"},
								{"id":"other2","topic":"I can do everything"}
							]}
						]}
					};
					var options = {
						container:'jsmind_container',
						theme:'orange',
						editable:true
					};
					var jm = new jsMind(options);
					jm.show(mind);
				</script>
            {% else %}
                <p>你还没有登录，请
                    <button class="btn btn-default"><a href="{% url 'login' %}?next={{ request.path }}">登录</a>
                    </button>
                    或者
                    <button class="btn btn-default"><a href="{% url 'users:register' %}?next={{ request.path }}">注册</a>
                    </button>
                </p>
            {% endif %}
        
    </body>
</html>